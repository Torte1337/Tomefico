<toolkit:Popup 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    x:Class="Tomefico.Views.Popup.DetailBookPopup"
    xmlns:vm="clr-namespace:Tomefico.ViewModels"
    x:DataType="vm:DetailBookViewModel"
    CanBeDismissedByTappingOutsideOfPopup="True"
    Color="Transparent">

    <Grid Padding="15" VerticalOptions="Center" HorizontalOptions="Center">
        <Border
            StrokeShape="RoundRectangle 35"
            BackgroundColor="White"
            WidthRequest="300"
            MaximumHeightRequest="600"
            Padding="0">

            <Grid RowDefinitions="Auto,Auto,*">

                <!-- Header mit Close -->
                <Grid Row="0" Padding="15" BackgroundColor="#FAFAFA">
                    <Label Text="Buchdetails" FontSize="18" FontAttributes="Bold" HorizontalOptions="Start" VerticalOptions="Center"/>
                    <Button Text="✕"
                            Command="{Binding ClosePopupCommand}"
                            FontSize="16"
                            BackgroundColor="Transparent"
                            HorizontalOptions="End"
                            TextColor="Black"/>
                </Grid>

                <!-- Bild + Favoriten Icon -->
                <Grid Row="1">
                    <Border StrokeShape="RoundRectangle 15,15,0,0">
                        <Image Aspect="AspectFill" Source="{Binding SelectedBook.CoverImage}" BackgroundColor="#EEE" HeightRequest="220"/>
                    </Border>
                    <!-- Favoriten-Herz -->
                    <Label Text="❤"
                           HeightRequest="24" 
                           WidthRequest="24"
                           HorizontalOptions="End"
                           VerticalOptions="Start"
                           IsVisible="{Binding SelectedBook.IsFavorite}"
                           Margin="10"/>
                </Grid>

                <!-- Inhalte -->
                <Border Grid.Row="2" TranslationY="-10" StrokeShape="RoundRectangle 15,15,0,0" BackgroundColor="#F4F4F4" Padding="20">
                    <VerticalStackLayout Spacing="12">

                        <Label Text="{Binding SelectedBook.Title}" FontSize="20" FontAttributes="Bold" TextColor="#333"/>

                        <Label Text="{Binding SelectedBook.Description}" FontSize="14" TextColor="#666" LineBreakMode="WordWrap"/>

                        <HorizontalStackLayout Spacing="15" HorizontalOptions="End" Margin="0,10,0,0">

                        </HorizontalStackLayout>

                    </VerticalStackLayout>
                </Border>

            </Grid>
        </Border>
    </Grid>
</toolkit:Popup>
